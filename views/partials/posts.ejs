<div class="container">
    <% posts.forEach(post => { %>
        <div class="card mb-4">
            <div class="card-body">
                <h1 class="card-title"><%- post.titulo %></h1> 
                <p class="cardText"><%- post.conteudo %></p>
                <p class="cardText">Autor: <%= post.autor %></p>
                <p class="cardText">Data de postagem: <%=new Date(post.datapostagem).toLocaleString('pt-BR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'})%></p>

                <% console.log('Usuário logado:', req.session.username); %>
                <% console.log('Autor do post:', post.autor); %>

                <% if(req.session.loggedin && (req.session.username === post.autor || req.session.username === 'admin')) { %>
                    <form action="/delete_post/<%= post.id %>" method="POST">
                        <button type="submit" class="btn btn-danger">Excluir</button>
                    </form>
                <% } else { %>
                    <p>Você não tem permissão para excluir esta postagem.</p>
                <% } %>
            </div>
        </div>
    <% }) %>
</div>
